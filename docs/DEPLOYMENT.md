# Deployment Guide

## Overview

This guide covers the deployment process for the Personal Website 2025 project using Vercel.

## Prerequisites

- GitHub repository connected (brownjer3/website-2025)
- Vercel account created
- Environment variables configured (if needed)
- Production build tested locally

## Deployment Environments

### Development
- **URL**: http://localhost:3000
- **Branch**: feature branches
- **Purpose**: Local development
- **Commands**: `npm run dev`

### Preview
- **URL**: Auto-generated by Vercel
- **Branch**: All non-main branches
- **Purpose**: Testing and review
- **Features**: Comments, shareable links

### Production
- **URL**: TBD (custom domain to be configured)
- **Branch**: main
- **Purpose**: Live site
- **Cache**: Edge caching enabled

## Initial Setup

### 1. Connect to Vercel

```bash
# Install Vercel CLI (optional)
npm i -g vercel

# Login to Vercel
vercel login

# Link project
vercel link
```

Or use GitHub integration:
1. Go to vercel.com/new
2. Import GitHub repository
3. Select brownjer3/website-2025
4. Configure project

### 2. Configure Project Settings

In Vercel Dashboard:

1. **Framework Preset**: Next.js
2. **Build Command**: `npm run build`
3. **Output Directory**: `.next`
4. **Install Command**: `npm install`
5. **Development Command**: `npm run dev`

### 3. Environment Variables

Add in Vercel Dashboard → Settings → Environment Variables:

```bash
# Optional - for higher GitHub API rate limits
GITHUB_TOKEN=ghp_xxxxxxxxxxxx

# Future integrations
RESEND_API_KEY=re_xxxxxxxxxxxx        # Email service
PLAUSIBLE_DOMAIN=yourdomain.com       # Analytics
```

## Deployment Process

### Automatic Deployment

1. **Production Deploy**
   ```bash
   git push origin main
   ```
   - Triggers automatic build
   - Deploys to production URL
   - Updates within 1-2 minutes

2. **Preview Deploy**
   ```bash
   git push origin feature/your-feature
   ```
   - Creates preview URL
   - Shareable for testing
   - Deleted after PR merge

### Manual Deployment

Using Vercel CLI:
```bash
# Deploy to preview
vercel

# Deploy to production
vercel --prod
```

## Build Optimization

### Current Build Stats
- Build time: ~30 seconds
- Initial JS: ~200KB
- Total size: ~500KB

### Optimization Checklist

- [ ] Enable Turbo build in Vercel
- [ ] Configure ISR for dynamic pages
- [ ] Set proper cache headers
- [ ] Enable compression
- [ ] Configure redirects

## Domain Configuration

### Custom Domain Setup

1. Add domain in Vercel Dashboard
2. Update DNS records:
   ```
   Type: A
   Name: @
   Value: 76.76.21.21
   
   Type: CNAME
   Name: www
   Value: cname.vercel-dns.com
   ```

3. Enable HTTPS (automatic)
4. Configure www redirect

### SSL Certificate
- Automatically provisioned by Vercel
- Let's Encrypt certificates
- Auto-renewal enabled

## Performance Configuration

### Caching Strategy

```javascript
// next.config.ts headers
{
  source: '/api/:path*',
  headers: [
    {
      key: 'Cache-Control',
      value: 'public, s-maxage=3600, stale-while-revalidate',
    },
  ],
}
```

### Edge Configuration

Enable Edge Runtime for API routes:
```typescript
export const runtime = 'edge'
```

## Monitoring

### Vercel Analytics

1. Enable in Dashboard → Analytics
2. Track Core Web Vitals
3. Monitor performance trends
4. Set up alerts

### Error Tracking

Configure Sentry (optional):
```bash
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_ORG=your-org
SENTRY_PROJECT=personal-website
```

### Uptime Monitoring

Vercel provides basic monitoring:
- Response time tracking
- Error rate monitoring
- Availability checks

## Rollback Process

### Via Dashboard
1. Go to Deployments tab
2. Find previous successful deployment
3. Click "..." → "Promote to Production"

### Via CLI
```bash
# List deployments
vercel ls

# Rollback to specific deployment
vercel rollback [deployment-url]
```

## Troubleshooting

### Build Failures

1. **Check build logs**
   ```bash
   vercel logs [deployment-url]
   ```

2. **Common issues**:
   - Missing environment variables
   - TypeScript errors
   - Dependency issues
   - Memory limits

3. **Local build test**
   ```bash
   npm run build
   npm start
   ```

### Runtime Errors

1. Check Function logs in Dashboard
2. Verify environment variables
3. Check API rate limits
4. Review error tracking

### Performance Issues

1. Analyze bundle size:
   ```bash
   npm run build
   # Check .next/analyze/
   ```

2. Review Core Web Vitals in Analytics
3. Check cache hit rates
4. Optimize images and fonts

## Security Checklist

- [ ] Environment variables are encrypted
- [ ] API routes have proper validation
- [ ] CORS configured correctly
- [ ] Security headers enabled
- [ ] No sensitive data in client bundles
- [ ] GitHub repository is private

## Maintenance

### Regular Tasks

1. **Weekly**
   - Review Analytics data
   - Check error logs
   - Monitor performance

2. **Monthly**
   - Update dependencies
   - Review and optimize bundle size
   - Clean up old deployments

3. **Quarterly**
   - Security audit
   - Performance optimization
   - Feature deployment review

## CI/CD Enhancement (Future)

### GitHub Actions Setup

```yaml
name: Deploy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run lint
      - run: npm run type-check
      - run: npm run build
      - uses: vercel/action@v1
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
```

## Backup and Recovery

### Code Backup
- GitHub repository (primary)
- Local git clones
- Vercel deployment history

### Data Backup
- Currently static (no database)
- Form submissions (when implemented) backed up via email service

---

*Last updated: 2025-07-12*